<div style="display:table;width:100%;">
  <div style="display:table-row;">
    {% if include.image_position == 'left' %}
      <div style="display:table-cell;vertical-align:middle;">
        <figure class="figureext figureext--{{ include.position | default: 'center' }}">
          <img class="image" src="{{ include.image }}" alt="{{ include.alt | default: include.caption }}" {{ include.width ? include.width | prepend: 'width="' | append: '"' }} {{ include.height ? include.height | prepend: 'height="' | append: '"' }}>
          {% if include.caption %}
            <figcaption class="caption">{{ include.caption }}</figcaption>
          {% endif %}
        </figure>
      </div>
      <div style="display:table-cell;vertical-align:middle;padding-left:20px;">
        <div>{{ include.text }}</div>
      </div>
    {% else %}
      <div style="display:table-cell;vertical-align:middle;padding-right:20px;">
        <div>{{ include.text }}</div>
      </div>
      <div style="display:table-cell;vertical-align:middle;">
        <figure class="figureext figureext--{{ include.position | default: 'center' }}">
          <img class="image" src="{{ include.image }}" alt="{{ include.alt | default: include.caption }}" {{ include.width ? include.width | prepend: 'width="' | append: '"' }} {{ include.height ? include.height | prepend: 'height="' | append: '"' }}>
          {% if include.caption %}
            <figcaption class="caption">{{ include.caption }}</figcaption>
          {% endif %}
        </figure>
      </div>
    {% endif %}
  </div>
</div>
